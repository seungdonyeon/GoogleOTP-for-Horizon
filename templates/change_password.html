{% extends "base.html" %}
{% set title = "OTP Hub Admin ‚Ä¢ Change password" %}

{% block content %}
  <div class="panel" style="max-width:720px;margin:10px auto 0 auto;">
    <div class="hd">
      <p class="h1" style="margin:0;">Change admin password</p>
      <p class="h2" style="margin:6px 0 0 0;">Updates the local admin password file used by OTP Hub.</p>
    </div>
    <div class="bd">
      <form method="post" class="section">
        <div class="section">
          <label for="current">Current password</label>
          <input id="current" type="password" name="current_password" autocomplete="current-password" required>
        </div>
        <div class="section">
          <label for="new">New password</label>
          <input id="new" type="password" name="new_password" autocomplete="new-password" required>
          <div class="help" style="margin-top:8px;">
            Choose a strong password (length + diversity). OTP Hub stores a password hash (not plaintext).
          </div>
        </div>

        <div class="section" style="display:flex; gap:10px; justify-content:flex-end;">
          <a class="btn" href="/">‚Üê Back</a>
          <button class="btn primary" type="submit">üíæ Update password</button>
        </div>

        {% if error %}
          <hr class="sep">
          <div class="card" style="border-color: rgba(251,113,133,.35);">
            <div style="font-weight:700;">Could not change password</div>
            <div class="help" style="margin-top:6px;">{{ error }}</div>
          </div>
        {% endif %}

        {% if success %}
          <hr class="sep">
          <div class="card" style="border-color: rgba(52,211,153,.35);">
            <div style="font-weight:700;">Password updated</div>
            <div class="help" style="margin-top:6px;">{{ success }}</div>
          </div>
        {% endif %}
      </form>
    </div>
  </div>
{% endblock %}
